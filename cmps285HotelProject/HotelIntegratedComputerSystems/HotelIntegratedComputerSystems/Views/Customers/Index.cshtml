@model IEnumerable<HotelIntegratedComputerSystems.Models.Employees.CustomersViewModel>

@{
    ViewBag.Title = "Index";
}

<h2>Customers</h2>

<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title">Rooms</h3>
    </div>
    <input type="text" id="myInput" onkeyup="filterFunction()" class="form-control" data-action="filter" placeholder="Filter Customers" />
    <table class="table table-hover" id="dev-table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Address)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Phone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.ActionLink("Create New", "Create")
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Phone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }
    </table>
</div>

<script>
    function filterFunction() {
        var input = document.getElementById("myInput");
        var filter = input.value.toUpperCase();
        var SplitFilter = filter.split(" ")
        var CleanedSplitFilter = SplitFilter.filter(Boolean);

		var table = document.getElementById("dev-table");
		var tr = table.getElementsByTagName("tr");

		for (var i = 0; i < tr.length; i++) {
			tr[i].style.display = "";
            var Building = tr[i].getElementsByTagName("td")[0];
            var Floor = tr[i].getElementsByTagName("td")[1];
            var Room = tr[i].getElementsByTagName("td")[2];
            var Bedding = tr[i].getElementsByTagName("td")[3]
            if (filter != "") {
                for (var j = 0; j < CleanedSplitFilter.length; j++) {
                    if (Building || Floor || Room || Bedding) {
                        if ((CheckForMatch(Building, Floor, Room, Bedding, CleanedSplitFilter[j]))
                            && (tr[i].style.display == "")) {
                                tr[i].style.display = "";
                            }
                        else if ((CheckForMatch(Building, Floor, Room, Bedding, CleanedSplitFilter[j]))
                            && (tr[i].style.display == "none")) {
                            }
                            else {
                                tr[i].style.display = "none";
                            }
                        }
                    }
                }
                else {
                    tr[i].style.display = "";
                }
            }
        }
    function CheckForMatch(Building, Floor, Room, Bedding, filter)
    {
        return      Building.innerHTML.toUpperCase().indexOf(filter) > -1
                    || Floor.innerHTML.toUpperCase().indexOf(filter) > -1
                    || Room.innerHTML.toUpperCase().indexOf(filter) > -1
                    || Bedding.innerHTML.toUpperCase().indexOf(filter) > -1;
    }
</script>